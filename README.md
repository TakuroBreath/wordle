Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ: Ğ‘ÑĞºĞµĞ½Ğ´ on-chain Wordle Game (Telegram Mini App)

Ğ¦ĞµĞ»ÑŒ

Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ backend-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Go, Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°ÑÑ‰ĞµĞµ Ğ¸Ğ³Ñ€Ñƒ Wordle Ñ ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°Ğ¼Ğ¸, Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½ÑƒÑ ĞºĞ°Ğº Telegram Mini App. Ğ‘ÑĞºĞµĞ½Ğ´ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ Ğ·Ğ° Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ğ¸Ğ³Ñ€Ñ‹, Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ ÑÑ‚Ğ°Ğ²Ğ¾Ğº, Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ±Ğ»Ğ¾ĞºÑ‡ĞµĞ¹Ğ½Ğ¾Ğ¼ Ğ¸ Ğ²Ñ‹Ğ´Ğ°Ñ‡Ñƒ Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´.

â¸»

Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸
	â€¢	Ğ¯Ğ·Ñ‹Ğº: Go 1.24+
	â€¢	Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ: PostgreSQL, In-Memory (Ğ´Ğ»Ñ ÑĞµÑÑĞ¸Ğ¹ Ğ¸ ĞºÑÑˆĞ°)
	â€¢	Blockchain: TON (Ñ‡ĞµÑ€ĞµĞ· SDK / gRPC / REST)
	â€¢	API: REST (JSON over HTTPS), Gin
	â€¢	ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ: Ñ‡ĞµÑ€ĞµĞ· Telegram Mini App Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
	â€¢	Observability:
		â€¢ ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸: Prometheus + Grafana
		â€¢ Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Loki + Promtail + Grafana

â¸»

ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸

1. User (Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ)
	â€¢	telegram_id: uint64 (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹)
	â€¢	username: string
	â€¢	first_name: string
	â€¢	last_name: string
	â€¢	wallet: string
	â€¢	balance_ton: float64
	â€¢	balance_usdt: float64
	â€¢	wins: int
	â€¢	losses: int
	â€¢	created_at: datetime
	â€¢	updated_at: datetime

2. Game (Ğ¸Ğ³Ñ€Ğ°)
	â€¢	id: UUID
	â€¢	creator_id: uint64 (Telegram ID ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»Ñ)
	â€¢	word: string
	â€¢	length: int
	â€¢	difficulty: string
	â€¢	max_tries: int
	â€¢	title: string
	â€¢	description: text
	â€¢	min_bet: float64
	â€¢	max_bet: float64
	â€¢	reward_multiplier: float64
	â€¢	currency: string ("TON" Ğ¸Ğ»Ğ¸ "USDT")
	â€¢	reward_pool_ton: float64
	â€¢	reward_pool_usdt: float64
	â€¢	status: string ("active" Ğ¸Ğ»Ğ¸ "inactive")
	â€¢	created_at: datetime
	â€¢	updated_at: datetime

3. Lobby (Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ ÑĞµÑÑĞ¸Ñ)
	â€¢	id: UUID
	â€¢	game_id: UUID
	â€¢	user_id: uint64 (Telegram ID Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°)
	â€¢	max_tries: int
	â€¢	tries_used: int
	â€¢	bet_amount: float64
	â€¢	potential_reward: float64
	â€¢	status: string ("active" Ğ¸Ğ»Ğ¸ "inactive")
	â€¢	created_at: datetime
	â€¢	updated_at: datetime
	â€¢	expires_at: datetime
	â€¢	attempts: []Attempt

4. Attempt (Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ°)
	â€¢	id: UUID
	â€¢	game_id: UUID
	â€¢	user_id: uint64 (Telegram ID Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°)
	â€¢	word: string
	â€¢	result: []int (0 - Ğ½ĞµÑ‚, 1 - ĞµÑÑ‚ÑŒ Ğ² ÑĞ»Ğ¾Ğ²Ğµ, 2 - Ğ½Ğ° Ğ¼ĞµÑÑ‚Ğµ)
	â€¢	created_at: datetime
	â€¢	updated_at: datetime

â¸»

Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
	â€¢	ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ²Ñ…Ğ¾Ğ´Ğµ Ñ‡ĞµÑ€ĞµĞ· Telegram Mini App Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ telegram_id.
	â€¢	Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ = 0, Ğ¿Ğ¾Ğ±ĞµĞ´ Ğ¸ Ğ¿Ğ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ½ĞµÑ‚.

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹
	â€¢	Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ·Ğ°Ğ´Ğ°Ñ‘Ñ‚ ÑĞ»Ğ¾Ğ²Ğ¾, Ğ¼Ğ°ĞºÑ. ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº, Ğ¼Ğ½Ğ¾Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ñ‹, Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½ÑƒÑ Ğ¸ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½ÑƒÑ ÑÑ‚Ğ°Ğ²ĞºĞ¸.
	â€¢	Ğ’Ñ‹ÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ max_reward = max_bet * multiplier.
	â€¢	Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ñ‚ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚(reward pool) = max_reward (ĞĞ° Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğµ)
	â€¢	ĞŸĞ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ¹ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ Ğ¸Ğ³Ñ€Ğ° ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾Ğ¹ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°Ğ¼.

ĞŸÑ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğº Ğ¸Ğ³Ñ€Ğµ
	â€¢	Ğ˜Ğ³Ñ€Ğ¾Ğº ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞ²Ğ¾Ñ ÑÑ‚Ğ°Ğ²ĞºÑƒ (>= min_bet, <= max_bet).
	â€¢	Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Lobby, Ğ²Ñ‹ÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ñˆ.
	â€¢	Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ Ğ¸Ğ³Ñ€Ñƒ Ñ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¼ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº.

ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ°
	â€¢	Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ»Ğ¾Ğ²Ğ¾ (client-side Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ğ¸Ğ½Ñ‹).
	â€¢	Ğ‘ÑĞºĞµĞ½Ğ´ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¼Ğ°ÑÑĞ¸Ğ² Ğ¸Ğ· int:
	â€¢	0 â€” Ğ±ÑƒĞºĞ²Ñ‹ Ğ½ĞµÑ‚
	â€¢	1 â€” Ğ±ÑƒĞºĞ²Ğ° ĞµÑÑ‚ÑŒ, Ğ½Ğµ Ğ½Ğ° Ğ¼ĞµÑÑ‚Ğµ
	â€¢	2 â€” Ğ±ÑƒĞºĞ²Ğ° ĞµÑÑ‚ÑŒ Ğ¸ Ğ½Ğ° Ğ¼ĞµÑÑ‚Ğµ
	â€¢	ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ.
	â€¢	Ğ•ÑĞ»Ğ¸ ÑĞ»Ğ¾Ğ²Ğ¾ ÑƒĞ³Ğ°Ğ´Ğ°Ğ½Ğ¾ â€” ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ»Ğ¾Ğ±Ğ±Ğ¸ = success, Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ñˆ Ğ½Ğ° Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°.
	â€¢	Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ Ğ¸ÑÑ‡ĞµÑ€Ğ¿Ğ°Ğ½Ñ‹ Ğ¸Ğ»Ğ¸ Ğ²Ñ€ĞµĞ¼Ñ Ğ²Ñ‹ÑˆĞ»Ğ¾ â€” ÑÑ‚Ğ°Ñ‚ÑƒÑ = failed.
	â€¢	Ğ•ÑĞ»Ğ¸ Ğ¸Ğ³Ñ€Ğ° Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ½Ğ°, ÑÑ‚Ğ°Ğ²ĞºĞ° Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ Ğ² reward pool Ğ¸Ğ³Ñ€Ñ‹.

Ğ’Ñ‹Ğ¿Ğ»Ğ°Ñ‚Ğ° Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´
	â€¢	ĞŸĞ¾Ğ±ĞµĞ´Ğ°: ÑÑƒĞ¼Ğ¼Ğ° Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ Ğ¸Ğ³Ñ€Ğ¾ĞºÑƒ, Ğ²Ñ‹Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ñƒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»Ñ.
	â€¢	ĞŸÑ€Ğ¾Ğ¸Ğ³Ñ€Ñ‹Ñˆ: Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ Ñƒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»Ñ.
	â€¢	ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ: % Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ Ğ² ÑĞµÑ€Ğ²Ğ¸ÑĞµ (ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ğ°, Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ 5%).
	â€¢	Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¸Ğ³Ñ€Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ñƒ, ĞµĞµ reward pool Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğº Ğ½ĞµĞ¼Ñƒ Ğ½Ğ° Ğ±Ğ°Ğ»Ğ°Ğ½Ñ.
	â€¢	Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚Ñƒ Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´ ÑĞ¾ ÑĞ²Ğ¾ĞµĞ³Ğ¾ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°. Ğ•Ğ³Ğ¾ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ÑÑ.

â¸»

API (ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹)

Auth
	â€¢	POST /auth/telegram â€” Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼ Telegram Mini App
	â€¢	GET /auth/verify â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸ Telegram Mini App

User
	â€¢	GET /me â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
	â€¢	GET /user/{id} â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾ ID
	â€¢	GET /user/balance â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
	â€¢	POST /user/withdraw â€” Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ğ²Ñ‹Ğ²Ğ¾Ğ´ ÑÑ€ĞµĞ´ÑÑ‚Ğ²
	â€¢	GET /user/withdraw/history â€” Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¾Ğ²

Game
	â€¢	POST /game â€” ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ¸Ğ³Ñ€Ñ‹
	â€¢	GET /game/{id} â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ğ± Ğ¸Ğ³Ñ€Ğµ
	â€¢	GET /games/active â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€
	â€¢	GET /games/my â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¸Ğ³Ñ€, ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼
	â€¢	DELETE /game/{id} â€” ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»Ñ)
	â€¢	POST /game/{id}/reward-pool â€” Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ reward pool Ğ¸Ğ³Ñ€Ñ‹

Lobby
	â€¢	POST /lobby/join â€” Ğ¿Ñ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğº Ğ¸Ğ³Ñ€Ğµ
	â€¢	GET /lobby/{id} â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ Ğ»Ğ¾Ğ±Ğ±Ğ¸
	â€¢	GET /lobby/active â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¾Ğ±Ğ±Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
	â€¢	POST /lobby/{id}/attempt â€” Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ ÑƒĞ³Ğ°Ğ´Ğ°Ñ‚ÑŒ ÑĞ»Ğ¾Ğ²Ğ¾
	â€¢	GET /lobby/{id}/attempts â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº

Admin / Service
	â€¢	GET /stats â€” Ğ¾Ğ±Ñ‰Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
	â€¢	GET /stats/games â€” ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ğ¸Ğ³Ñ€Ğ°Ğ¼
	â€¢	GET /stats/users â€” ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼
	â€¢	GET /rewards/pending â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‰Ğ¸Ñ… Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚
	â€¢	POST /rewards/process â€” Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚Ñ‹
	â€¢	GET /rewards/history â€” Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚

â¸»

Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ
	â€¢	Telegram ID Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° Ñ„Ñ€Ğ¾Ğ½Ñ‚Ğµ, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ÑÑ Ğ½Ğ° Ğ±ÑĞºĞµ.
	â€¢	Ğ’ÑĞµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ Ğ±Ğ»Ğ¾ĞºÑ‡ĞµĞ¹Ğ½Ğ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼.
	â€¢	Ğ˜Ğ³Ñ€Ğ° Ğ½Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ´Ğ¾ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»Ñ.
	â€¢	Ğ’ÑĞµ Ğ±Ğ°Ğ»Ğ°Ğ½ÑÑ‹ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ on-chain, Ğ»Ğ¸Ğ±Ğ¾ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ÑÑ.

â¸»

ĞŸĞ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ¾Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ (V2+)
	â€¢	NFT-Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ñ‹
	â€¢	Ğ¢ÑƒÑ€Ğ½Ğ¸Ñ€Ñ‹
	â€¢	Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ³Ñ€
	â€¢	Ğ ĞµĞ¿Ğ»ĞµĞ¹ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº
	â€¢	ĞœĞµÑ…Ğ°Ğ½Ğ¸ĞºĞ° "Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·Ğ¾Ğº Ğ·Ğ° ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ"

## Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ² Docker (ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸)

Ğ”Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸ (backend, frontend, PostgreSQL, Prometheus, Grafana, Loki):

1. **ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹:**
```bash
git clone https://github.com/TakuroBreath/wordle.git
cd wordle
```

2. **Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹:**
```bash
docker-compose -f docker-compose.full.yml up -d
```

3. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²:**
```bash
docker-compose -f docker-compose.full.yml ps
```

4. **ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²:**
```bash
# Ğ’ÑĞµ Ğ»Ğ¾Ğ³Ğ¸
docker-compose -f docker-compose.full.yml logs -f

# Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ backend
docker-compose -f docker-compose.full.yml logs -f app
```

#### Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾)

ĞŸĞ¾ÑĞ»Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ±ÑƒĞ´ÑƒÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹:

- **API Backend**: http://localhost:8080
- **Frontend**: http://localhost:3000
- **Grafana** (Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³): http://localhost:3000 (admin/secret)
- **Prometheus** (Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸): http://localhost:9090
- **Loki** (Ğ»Ğ¾Ğ³Ğ¸): http://localhost:3100
- **PostgreSQL**: localhost:5432

#### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²

- **wordle-api** - Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (Go)
- **wordle-postgres** - Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… PostgreSQL
- **prometheus** - ÑĞ±Ğ¾Ñ€ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº
- **grafana** - Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº Ğ¸ Ğ»Ğ¾Ğ³Ğ¾Ğ²
- **loki** - Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ»Ğ¾Ğ³Ğ¾Ğ²
- **promtail** - ÑĞ±Ğ¾Ñ€Ñ‰Ğ¸Ğº Ğ»Ğ¾Ğ³Ğ¾Ğ²

#### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°

**Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ backend + Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ±ĞµĞ· Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°):**
```bash
docker-compose up -d
```

**Backend + Frontend (Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸):**
```bash
docker-compose -f docker-compose.dev.yml up -d
```

**Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³:**
```bash
docker-compose -f docker-compose.full.yml up -d
```

### Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğµ

Ğ”Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸:

1. **Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:**
```bash
cp configs/config.docker.prod.yaml configs/config.docker.local.yaml
```

2. **Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ ÑĞµĞºÑ€ĞµÑ‚Ñ‹ Ğ² `configs/config.docker.local.yaml`:**
   - `postgres.password` - ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ Ğ´Ğ»Ñ PostgreSQL
   - `auth.jwt_secret` - JWT ÑĞµĞºÑ€ĞµÑ‚ (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 32 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°, ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ: `openssl rand -hex 32`)
   - `auth.bot_token` - Ñ‚Ğ¾ĞºĞµĞ½ Telegram Ğ±Ğ¾Ñ‚Ğ° (Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ñƒ @BotFather)
   - `blockchain.ton.api_key` - API ĞºĞ»ÑÑ‡ Ğ¾Ñ‚ toncenter.com
   - `blockchain.ton.master_wallet` - Ğ°Ğ´Ñ€ĞµÑ ĞºĞ°ÑÑ‚Ğ¾Ğ´Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ĞºĞ¾ÑˆĞµĞ»ÑŒĞºĞ°
   - `blockchain.ton.master_wallet_seed` - seed Ñ„Ñ€Ğ°Ğ·Ğ° ĞºĞ¾ÑˆĞµĞ»ÑŒĞºĞ° (24 ÑĞ»Ğ¾Ğ²Ğ°)

3. **ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ docker-compose.yml Ğ´Ğ»Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ°:**
   
   ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ `docker-compose.yml` Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ¿ÑƒÑ‚ÑŒ Ğº ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ñƒ:
   ```yaml
   volumes:
     - ./configs/config.docker.local.yaml:/app/config.yaml:ro
   ```

4. **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ PostgreSQL:**
   
   ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ `docker-compose.yml` Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ:
   ```yaml
   postgres:
     environment:
       POSTGRES_PASSWORD: YOUR_STRONG_PASSWORD
   ```

5. **Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğµ:**
```bash
docker-compose up -d
```

6. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸:**
```bash
docker-compose logs -f app
```

#### Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğ°

- âš ï¸ **ĞĞ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ÑŒÑ‚Ğµ** `configs/config.docker.local.yaml` Ğ² git (Ğ¾Ğ½ ÑƒĞ¶Ğµ Ğ² `.gitignore`)
- ğŸ”’ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
- ğŸ” Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ seed Ñ„Ñ€Ğ°Ğ·Ñƒ ĞºĞ¾ÑˆĞµĞ»ÑŒĞºĞ° Ğ² Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğ¼ Ğ¼ĞµÑÑ‚Ğµ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞµĞºÑ€ĞµÑ‚Ñ‹ Docker Ğ¸Ğ»Ğ¸ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ²)
- ğŸŒ Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğ° Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ½ĞµÑˆĞ½ÑÑ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- ğŸ“Š ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ±ÑĞºĞ°Ğ¿Ñ‹ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- ğŸ›¡ï¸ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ SSL/TLS Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº PostgreSQL Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğµ (`ssl_mode: require`)

### Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°Ğ¼Ğ¸

**ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°:**
```bash
docker-compose down
# Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ ÑÑ‚ĞµĞºĞ°
docker-compose -f docker-compose.full.yml down
```

**ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²Ğ¸ÑĞ°:**
```bash
docker-compose restart app
```

**ĞŸĞµÑ€ĞµÑĞ±Ğ¾Ñ€ĞºĞ° Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞº:**
```bash
docker-compose up -d --build
```

**Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (âš ï¸ Ğ¾ÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾!):**
```bash
docker-compose down -v
```

## ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ [golang-migrate](https://github.com/golang-migrate/migrate) Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….

### ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ÑÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ° Ñ‡ĞµÑ€ĞµĞ· `entrypoint.sh`.

**Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹:**

```bash
# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
docker-compose exec app migrate -path=/app/migrations -database postgres://postgres:postgres@postgres:5432/wordle?sslmode=disable up

# ĞÑ‚ĞºĞ°Ñ‚ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ¹ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
docker-compose exec app migrate -path=/app/migrations -database postgres://postgres:postgres@postgres:5432/wordle?sslmode=disable down 1

# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
docker-compose exec app migrate -path=/app/migrations -database postgres://postgres:postgres@postgres:5432/wordle?sslmode=disable version
```

**Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğ°** Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ ÑƒÑ‡ĞµÑ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ°.

## Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°Ğ±Ğ»ÑĞ´Ğ°ĞµĞ¼Ğ¾ÑÑ‚Ğ¸ (Observability)

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Prometheus + Grafana)

Prometheus ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¸Ğ· Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· HTTP-ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚ `/metrics`. Grafana Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸.

#### Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

1. **HTTP-Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸**:
   - `http_request_duration_seconds` - Ğ²Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
   - `http_requests_total` - ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
   - `errors_total` - ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

2. **Ğ˜Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸**:
   - `wordle_game_start_total` - ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ½Ğ°Ñ‡Ğ°Ñ‚Ñ‹Ñ… Ğ¸Ğ³Ñ€
   - `wordle_game_complete_total` - ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€
   - `wordle_game_abandoned_total` - ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ±Ñ€Ğ¾ÑˆĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€
   - `wordle_active_games` - Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€
   - `wordle_word_guessed_total` - ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑƒĞ³Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ»Ğ¾Ğ² Ğ¿Ğ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ñƒ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº

3. **Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Business)**:
   - `wordle_deposits_total_amount` - Ğ¾Ğ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ²
   - `wordle_withdrawals_total_amount` - Ğ¾Ğ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¾Ğ²
   - `wordle_commissions_total_amount` - ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸ (revenue Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
   - `wordle_bets_total_amount` - Ğ¾Ğ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° ÑÑ‚Ğ°Ğ²Ğ¾Ğº
   - `wordle_rewards_total_amount` - Ğ¾Ğ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚
   - `wordle_pending_withdrawals` - Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‰Ğ¸Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ñ‹

### Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Loki + Promtail)

Loki - Ğ»Ñ‘Ğ³ĞºĞ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ Ğ»Ğ¾Ğ³Ğ¾Ğ². ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ zap Ğ»Ğ¾Ğ³Ğ³ĞµÑ€ Ñ Ğ´Ğ²Ğ¾Ğ¹Ğ½Ñ‹Ğ¼ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¾Ğ¼:
- **Console (stdout)** - Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ´Ğ»Ñ `docker logs`
- **JSON (Ñ„Ğ°Ğ¹Ğ»)** - ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ´Ğ»Ñ Loki

ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ñ‡ĞµÑ€ĞµĞ· Grafana Log Explorer.

## Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

- [ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°Ğ±Ğ»ÑĞ´Ğ°ĞµĞ¼Ğ¾ÑÑ‚Ğ¸](./observability-README.md)
- [Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°](./monitoring-README.md)

