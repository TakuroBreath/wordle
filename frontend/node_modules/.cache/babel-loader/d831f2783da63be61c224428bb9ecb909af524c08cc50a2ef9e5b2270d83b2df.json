{"ast":null,"code":"import axios from 'axios';\n\n// Создаем экземпляр axios с базовым URL для API\nconst apiClient = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1',\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'X-Requested-With': 'XMLHttpRequest'\n  },\n  withCredentials: false // Отключаем отправку куки для решения проблем с CORS\n});\n\n// Добавляем перехватчик для обработки ошибок\napiClient.interceptors.response.use(response => {\n  return response;\n}, error => {\n  if (error.message === 'Network Error') {\n    console.error('Ошибка сети (возможно CORS):', error);\n  }\n  return Promise.reject(error);\n});\n\n// Функция для проверки, находимся ли мы в режиме разработки\nconst isDevelopmentMode = () => {\n  return process.env.NODE_ENV === 'development';\n};\n\n// Функция для проверки, используем ли мы тестовый токен\nconst isUsingDevToken = () => {\n  const token = localStorage.getItem('token');\n  return isDevelopmentMode() && token && token.startsWith('dev_');\n};\n\n// Функция для установки токена авторизации\nconst setAuthToken = token => {\n  console.log('Установка токена авторизации:', token ? 'токен установлен' : 'токен удален');\n  if (token) {\n    // Проверяем, начинается ли токен с \"Bearer \"\n    const bearerToken = token.startsWith('Bearer ') ? token : `Bearer ${token}`;\n    apiClient.defaults.headers.common['Authorization'] = bearerToken;\n    console.log('Установлен токен:', bearerToken.substring(0, 15) + '...');\n\n    // Сохраняем токен в localStorage для последующих запросов\n    localStorage.setItem('token', token);\n  } else {\n    delete apiClient.defaults.headers.common['Authorization'];\n    console.log('Токен авторизации удален');\n\n    // Удаляем токен из localStorage\n    localStorage.removeItem('token');\n  }\n  console.log('Текущие заголовки:', apiClient.defaults.headers);\n};\n\n// Функция для установки инициализационных данных Telegram Mini App\nconst setTelegramInitData = initData => {\n  if (initData) {\n    // Сохраняем текущий токен, если он есть\n    const currentToken = localStorage.getItem('token');\n    if (currentToken) {\n      // Если у нас уже есть токен, используем его вместо TMA данных\n      setAuthToken(currentToken);\n    } else {\n      // Иначе используем TMA данные\n      apiClient.defaults.headers.common['Authorization'] = `tma ${initData}`;\n      console.log('Установлены TMA данные в заголовок Authorization');\n    }\n  } else {\n    // Проверяем, есть ли сохраненный токен\n    const savedToken = localStorage.getItem('token');\n    if (savedToken) {\n      // Если есть сохраненный токен, используем его\n      setAuthToken(savedToken);\n    } else {\n      // Иначе удаляем заголовок авторизации\n      delete apiClient.defaults.headers.common['Authorization'];\n      console.log('Заголовок авторизации удален (нет TMA данных и сохраненного токена)');\n    }\n  }\n};\n\n// API для работы с аутентификацией\nconst auth = {\n  // Аутентификация через Telegram Mini App\n  telegramAuth: async data => {\n    console.log('Отправка запроса на аутентификацию:', data);\n    // Создаем отдельный экземпляр axios для запроса аутентификации\n    const authClient = axios.create({\n      baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-Requested-With': 'XMLHttpRequest'\n      },\n      withCredentials: false\n    });\n    try {\n      const response = await authClient.post('/auth/telegram', data);\n      console.log('Успешный ответ при аутентификации:', {\n        status: response.status,\n        data: response.data\n      });\n      return response;\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error('Ошибка при аутентификации:', {\n        message: error.message,\n        response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n        status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status\n      });\n      throw error;\n    }\n  },\n  // Проверка валидности токена\n  verifyToken: data => {\n    return apiClient.post('/auth/verify', data);\n  },\n  // Выход из аккаунта\n  logout: data => {\n    return apiClient.post('/auth/logout', data);\n  }\n};\n\n// API для работы с пользователями\nconst user = {\n  // Получение данных текущего пользователя\n  getCurrent: () => {\n    return apiClient.get('/users/me');\n  },\n  // Получение баланса пользователя\n  getBalance: () => {\n    return apiClient.get('/users/balance');\n  },\n  // Запрос на вывод средств\n  requestWithdraw: data => {\n    return apiClient.post('/users/withdraw', data);\n  },\n  // Получение истории выводов\n  getWithdrawHistory: params => {\n    return apiClient.get('/users/withdrawals', {\n      params\n    });\n  },\n  // Генерация адреса кошелька\n  generateWallet: () => {\n    return apiClient.post('/users/wallet');\n  }\n};\n\n// API для работы с играми\nconst game = {\n  // Создание новой игры\n  create: data => {\n    return apiClient.post('/games', data);\n  },\n  // Получение информации об игре по ID\n  get: id => {\n    return apiClient.get(`/games/${id}`);\n  },\n  // Получение списка активных игр\n  getActive: params => {\n    return apiClient.get('/games', {\n      params\n    });\n  },\n  // Получение списка игр, созданных пользователем\n  getMy: params => {\n    return apiClient.get('/games/my', {\n      params\n    });\n  },\n  // Удаление игры\n  delete: id => {\n    return apiClient.delete(`/games/${id}`);\n  },\n  // Пополнение reward pool игры\n  addReward: (id, data) => {\n    return apiClient.post(`/games/${id}/reward`, data);\n  },\n  // Активация игры\n  activate: id => {\n    return apiClient.post(`/games/${id}/activate`);\n  },\n  // Деактивация игры\n  deactivate: id => {\n    return apiClient.post(`/games/${id}/deactivate`);\n  }\n};\n\n// API для работы с лобби\nconst lobby = {\n  // Присоединение к игре (создание лобби)\n  join: async data => {\n    try {\n      // Проверяем наличие токена авторизации в заголовках\n      const authHeader = apiClient.defaults.headers.common['Authorization'];\n      console.log('Текущий заголовок авторизации:', authHeader ? 'Присутствует' : 'Отсутствует');\n      if (!authHeader) {\n        // Если токена нет в заголовках, проверяем localStorage\n        const token = localStorage.getItem('token');\n        console.log('Токен из localStorage:', token ? `${token.substring(0, 15)}...` : 'Отсутствует');\n        if (!token) {\n          // Проверяем, находимся ли мы в режиме разработки\n          if (isDevelopmentMode()) {\n            console.log('Режим разработки: используем тестовый токен');\n            // В режиме разработки используем тестовый токен\n            const devToken = 'dev_test_token_for_development_only';\n            setAuthToken(devToken);\n            console.log('Установлен тестовый токен для режима разработки');\n          } else {\n            throw new Error('Требуется авторизация');\n          }\n        } else {\n          // Устанавливаем токен в заголовки запроса\n          setAuthToken(token);\n          console.log('Токен установлен из localStorage для запроса на создание лобби');\n        }\n      } else {\n        console.log('Токен авторизации уже присутствует в заголовках');\n      }\n\n      // Проверяем наличие необходимых данных\n      if (!data.game_id) {\n        throw new Error('ID игры не указан');\n      }\n      if (!data.bet_amount || data.bet_amount <= 0) {\n        throw new Error('Некорректная сумма ставки');\n      }\n      const requestData = {\n        game_id: data.game_id,\n        bet_amount: data.bet_amount\n      };\n\n      // Если мы в режиме разработки и используем тестовый токен, добавляем флаг dev_mode\n      if (isUsingDevToken()) {\n        console.log('Добавление флага dev_mode в запрос');\n        requestData.dev_mode = true;\n      }\n\n      // Повторно проверяем заголовки перед отправкой запроса\n      const finalAuthHeader = apiClient.defaults.headers.common['Authorization'];\n      console.log('Финальный заголовок авторизации перед отправкой:', finalAuthHeader ? `${finalAuthHeader.substring(0, 20)}...` : 'Отсутствует');\n      console.log('Подготовка запроса на создание лобби:', {\n        url: '/lobbies',\n        method: 'POST',\n        data: requestData,\n        headers: {\n          ...apiClient.defaults.headers,\n          Authorization: apiClient.defaults.headers.common['Authorization'] ? apiClient.defaults.headers.common['Authorization'].substring(0, 20) + '...' : undefined\n        }\n      });\n      const response = await apiClient.post('/lobbies', requestData);\n      console.log('Успешный ответ сервера:', {\n        status: response.status,\n        data: response.data,\n        headers: response.headers\n      });\n\n      // Проверяем формат ответа и нормализуем его\n      if (response.data && !response.data.id && response.data.lobby) {\n        // Если сервер вернул данные в формате { lobby: { id: ... } }\n        response.data = response.data.lobby;\n      }\n      return response;\n    } catch (error) {\n      var _error$config, _error$config2, _error$config3, _error$config4, _error$config5, _error$config5$header, _error$config6, _error$config6$header, _error$response3, _error$response4, _error$response5, _error$response6, _error$response7, _error$response8, _error$response8$data, _error$response8$data2;\n      console.error('Ошибка при создании лобби:', {\n        message: error.message,\n        request: {\n          url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n          method: (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.method,\n          data: JSON.parse(((_error$config3 = error.config) === null || _error$config3 === void 0 ? void 0 : _error$config3.data) || '{}'),\n          headers: {\n            ...((_error$config4 = error.config) === null || _error$config4 === void 0 ? void 0 : _error$config4.headers),\n            Authorization: (_error$config5 = error.config) !== null && _error$config5 !== void 0 && (_error$config5$header = _error$config5.headers) !== null && _error$config5$header !== void 0 && _error$config5$header.Authorization ? ((_error$config6 = error.config) === null || _error$config6 === void 0 ? void 0 : (_error$config6$header = _error$config6.headers) === null || _error$config6$header === void 0 ? void 0 : _error$config6$header.Authorization.substring(0, 20)) + '...' : undefined\n          }\n        },\n        response: {\n          status: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status,\n          statusText: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.statusText,\n          data: (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data,\n          headers: (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.headers\n        }\n      });\n\n      // Если это ошибка 500 и сообщение об отсутствии активного лобби,\n      // пробуем создать лобби еще раз\n      if (((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : _error$response7.status) === 500 && (_error$response8 = error.response) !== null && _error$response8 !== void 0 && (_error$response8$data = _error$response8.data) !== null && _error$response8$data !== void 0 && (_error$response8$data2 = _error$response8$data.error) !== null && _error$response8$data2 !== void 0 && _error$response8$data2.includes('active lobby not found')) {\n        console.log('Повторная попытка создания лобби...');\n        try {\n          // Используем те же данные, что и в первом запросе\n          const retryData = {\n            game_id: data.game_id,\n            bet_amount: data.bet_amount\n          };\n          const retryResponse = await apiClient.post('/lobbies', retryData);\n          console.log('Успешный ответ сервера при повторной попытке:', {\n            status: retryResponse.status,\n            data: retryResponse.data,\n            headers: retryResponse.headers\n          });\n          return retryResponse;\n        } catch (retryError) {\n          var _retryError$response, _retryError$response2, _retryError$config, _retryError$config2, _retryError$config3, _retryError$config4, _retryError$config5, _retryError$config5$h, _retryError$config6, _retryError$config6$h, _retryError$response3, _retryError$response4, _retryError$response5, _retryError$response6;\n          console.error('Ошибка при повторной попытке создания лобби:', {\n            status: (_retryError$response = retryError.response) === null || _retryError$response === void 0 ? void 0 : _retryError$response.status,\n            data: (_retryError$response2 = retryError.response) === null || _retryError$response2 === void 0 ? void 0 : _retryError$response2.data,\n            message: retryError.message,\n            request: {\n              url: (_retryError$config = retryError.config) === null || _retryError$config === void 0 ? void 0 : _retryError$config.url,\n              method: (_retryError$config2 = retryError.config) === null || _retryError$config2 === void 0 ? void 0 : _retryError$config2.method,\n              data: JSON.parse(((_retryError$config3 = retryError.config) === null || _retryError$config3 === void 0 ? void 0 : _retryError$config3.data) || '{}'),\n              headers: {\n                ...((_retryError$config4 = retryError.config) === null || _retryError$config4 === void 0 ? void 0 : _retryError$config4.headers),\n                Authorization: (_retryError$config5 = retryError.config) !== null && _retryError$config5 !== void 0 && (_retryError$config5$h = _retryError$config5.headers) !== null && _retryError$config5$h !== void 0 && _retryError$config5$h.Authorization ? ((_retryError$config6 = retryError.config) === null || _retryError$config6 === void 0 ? void 0 : (_retryError$config6$h = _retryError$config6.headers) === null || _retryError$config6$h === void 0 ? void 0 : _retryError$config6$h.Authorization.substring(0, 20)) + '...' : undefined\n              }\n            },\n            response: {\n              status: (_retryError$response3 = retryError.response) === null || _retryError$response3 === void 0 ? void 0 : _retryError$response3.status,\n              statusText: (_retryError$response4 = retryError.response) === null || _retryError$response4 === void 0 ? void 0 : _retryError$response4.statusText,\n              data: (_retryError$response5 = retryError.response) === null || _retryError$response5 === void 0 ? void 0 : _retryError$response5.data,\n              headers: (_retryError$response6 = retryError.response) === null || _retryError$response6 === void 0 ? void 0 : _retryError$response6.headers\n            }\n          });\n          throw retryError;\n        }\n      }\n      throw error;\n    }\n  },\n  // Получение информации о лобби по ID\n  get: id => {\n    return apiClient.get(`/lobbies/${id}`);\n  },\n  // Получение активного лобби пользователя\n  getActive: () => {\n    return apiClient.get('/lobbies/active');\n  },\n  // Получение всех лобби пользователя\n  getAll: params => {\n    return apiClient.get('/lobbies', {\n      params\n    });\n  },\n  // Отправка попытки угадать слово\n  makeAttempt: (id, data) => {\n    return apiClient.post(`/lobbies/${id}/attempt`, data);\n  },\n  // Получение истории попыток\n  getAttempts: id => {\n    return apiClient.get(`/lobbies/${id}/attempts`);\n  },\n  // Продление времени лобби\n  extendTime: (id, data) => {\n    return apiClient.post(`/lobbies/${id}/extend`, data);\n  }\n};\n\n// API для работы с транзакциями\nconst transaction = {\n  // Получение всех транзакций пользователя\n  getAll: params => {\n    return apiClient.get('/transactions', {\n      params\n    });\n  },\n  // Получение транзакции по ID\n  get: id => {\n    return apiClient.get(`/transactions/${id}`);\n  },\n  // Создание депозита\n  createDeposit: data => {\n    return apiClient.post('/transactions/deposit', data);\n  },\n  // Проверка статуса депозита\n  verifyDeposit: data => {\n    return apiClient.post('/transactions/verify', data);\n  }\n};\n\n// Собираем все API методы в один объект\nconst apiService = {\n  apiClient,\n  setAuthToken,\n  setTelegramInitData,\n  isDevelopmentMode,\n  isUsingDevToken,\n  auth,\n  user,\n  game,\n  lobby,\n  transaction\n};\nexport default apiService;","map":{"version":3,"names":["axios","apiClient","create","baseURL","process","env","REACT_APP_API_URL","headers","withCredentials","interceptors","response","use","error","message","console","Promise","reject","isDevelopmentMode","NODE_ENV","isUsingDevToken","token","localStorage","getItem","startsWith","setAuthToken","log","bearerToken","defaults","common","substring","setItem","removeItem","setTelegramInitData","initData","currentToken","savedToken","auth","telegramAuth","data","authClient","post","status","_error$response","_error$response2","verifyToken","logout","user","getCurrent","get","getBalance","requestWithdraw","getWithdrawHistory","params","generateWallet","game","id","getActive","getMy","delete","addReward","activate","deactivate","lobby","join","authHeader","devToken","Error","game_id","bet_amount","requestData","dev_mode","finalAuthHeader","url","method","Authorization","undefined","_error$config","_error$config2","_error$config3","_error$config4","_error$config5","_error$config5$header","_error$config6","_error$config6$header","_error$response3","_error$response4","_error$response5","_error$response6","_error$response7","_error$response8","_error$response8$data","_error$response8$data2","request","config","JSON","parse","statusText","includes","retryData","retryResponse","retryError","_retryError$response","_retryError$response2","_retryError$config","_retryError$config2","_retryError$config3","_retryError$config4","_retryError$config5","_retryError$config5$h","_retryError$config6","_retryError$config6$h","_retryError$response3","_retryError$response4","_retryError$response5","_retryError$response6","getAll","makeAttempt","getAttempts","extendTime","transaction","createDeposit","verifyDeposit","apiService"],"sources":["/Users/takuro/Projects/wordle/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n// Создаем экземпляр axios с базовым URL для API\nconst apiClient = axios.create({\n    baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1',\n    headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-Requested-With': 'XMLHttpRequest'\n    },\n    withCredentials: false // Отключаем отправку куки для решения проблем с CORS\n});\n\n// Добавляем перехватчик для обработки ошибок\napiClient.interceptors.response.use(\n    (response) => {\n        return response;\n    },\n    (error) => {\n        if (error.message === 'Network Error') {\n            console.error('Ошибка сети (возможно CORS):', error);\n        }\n        return Promise.reject(error);\n    }\n);\n\n// Функция для проверки, находимся ли мы в режиме разработки\nconst isDevelopmentMode = () => {\n    return process.env.NODE_ENV === 'development';\n};\n\n// Функция для проверки, используем ли мы тестовый токен\nconst isUsingDevToken = () => {\n    const token = localStorage.getItem('token');\n    return isDevelopmentMode() && token && token.startsWith('dev_');\n};\n\n// Функция для установки токена авторизации\nconst setAuthToken = (token) => {\n    console.log('Установка токена авторизации:', token ? 'токен установлен' : 'токен удален');\n    if (token) {\n        // Проверяем, начинается ли токен с \"Bearer \"\n        const bearerToken = token.startsWith('Bearer ') ? token : `Bearer ${token}`;\n        apiClient.defaults.headers.common['Authorization'] = bearerToken;\n        console.log('Установлен токен:', bearerToken.substring(0, 15) + '...');\n\n        // Сохраняем токен в localStorage для последующих запросов\n        localStorage.setItem('token', token);\n    } else {\n        delete apiClient.defaults.headers.common['Authorization'];\n        console.log('Токен авторизации удален');\n\n        // Удаляем токен из localStorage\n        localStorage.removeItem('token');\n    }\n    console.log('Текущие заголовки:', apiClient.defaults.headers);\n};\n\n// Функция для установки инициализационных данных Telegram Mini App\nconst setTelegramInitData = (initData) => {\n    if (initData) {\n        // Сохраняем текущий токен, если он есть\n        const currentToken = localStorage.getItem('token');\n        if (currentToken) {\n            // Если у нас уже есть токен, используем его вместо TMA данных\n            setAuthToken(currentToken);\n        } else {\n            // Иначе используем TMA данные\n            apiClient.defaults.headers.common['Authorization'] = `tma ${initData}`;\n            console.log('Установлены TMA данные в заголовок Authorization');\n        }\n    } else {\n        // Проверяем, есть ли сохраненный токен\n        const savedToken = localStorage.getItem('token');\n        if (savedToken) {\n            // Если есть сохраненный токен, используем его\n            setAuthToken(savedToken);\n        } else {\n            // Иначе удаляем заголовок авторизации\n            delete apiClient.defaults.headers.common['Authorization'];\n            console.log('Заголовок авторизации удален (нет TMA данных и сохраненного токена)');\n        }\n    }\n};\n\n// API для работы с аутентификацией\nconst auth = {\n    // Аутентификация через Telegram Mini App\n    telegramAuth: async (data) => {\n        console.log('Отправка запроса на аутентификацию:', data);\n        // Создаем отдельный экземпляр axios для запроса аутентификации\n        const authClient = axios.create({\n            baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                'X-Requested-With': 'XMLHttpRequest'\n            },\n            withCredentials: false\n        });\n\n        try {\n            const response = await authClient.post('/auth/telegram', data);\n            console.log('Успешный ответ при аутентификации:', {\n                status: response.status,\n                data: response.data\n            });\n            return response;\n        } catch (error) {\n            console.error('Ошибка при аутентификации:', {\n                message: error.message,\n                response: error.response?.data,\n                status: error.response?.status\n            });\n            throw error;\n        }\n    },\n\n    // Проверка валидности токена\n    verifyToken: (data) => {\n        return apiClient.post('/auth/verify', data);\n    },\n\n    // Выход из аккаунта\n    logout: (data) => {\n        return apiClient.post('/auth/logout', data);\n    },\n};\n\n// API для работы с пользователями\nconst user = {\n    // Получение данных текущего пользователя\n    getCurrent: () => {\n        return apiClient.get('/users/me');\n    },\n\n    // Получение баланса пользователя\n    getBalance: () => {\n        return apiClient.get('/users/balance');\n    },\n\n    // Запрос на вывод средств\n    requestWithdraw: (data) => {\n        return apiClient.post('/users/withdraw', data);\n    },\n\n    // Получение истории выводов\n    getWithdrawHistory: (params) => {\n        return apiClient.get('/users/withdrawals', { params });\n    },\n\n    // Генерация адреса кошелька\n    generateWallet: () => {\n        return apiClient.post('/users/wallet');\n    },\n};\n\n// API для работы с играми\nconst game = {\n    // Создание новой игры\n    create: (data) => {\n        return apiClient.post('/games', data);\n    },\n\n    // Получение информации об игре по ID\n    get: (id) => {\n        return apiClient.get(`/games/${id}`);\n    },\n\n    // Получение списка активных игр\n    getActive: (params) => {\n        return apiClient.get('/games', { params });\n    },\n\n    // Получение списка игр, созданных пользователем\n    getMy: (params) => {\n        return apiClient.get('/games/my', { params });\n    },\n\n    // Удаление игры\n    delete: (id) => {\n        return apiClient.delete(`/games/${id}`);\n    },\n\n    // Пополнение reward pool игры\n    addReward: (id, data) => {\n        return apiClient.post(`/games/${id}/reward`, data);\n    },\n\n    // Активация игры\n    activate: (id) => {\n        return apiClient.post(`/games/${id}/activate`);\n    },\n\n    // Деактивация игры\n    deactivate: (id) => {\n        return apiClient.post(`/games/${id}/deactivate`);\n    },\n};\n\n// API для работы с лобби\nconst lobby = {\n    // Присоединение к игре (создание лобби)\n    join: async (data) => {\n        try {\n            // Проверяем наличие токена авторизации в заголовках\n            const authHeader = apiClient.defaults.headers.common['Authorization'];\n            console.log('Текущий заголовок авторизации:', authHeader ? 'Присутствует' : 'Отсутствует');\n\n            if (!authHeader) {\n                // Если токена нет в заголовках, проверяем localStorage\n                const token = localStorage.getItem('token');\n                console.log('Токен из localStorage:', token ? `${token.substring(0, 15)}...` : 'Отсутствует');\n\n                if (!token) {\n                    // Проверяем, находимся ли мы в режиме разработки\n                    if (isDevelopmentMode()) {\n                        console.log('Режим разработки: используем тестовый токен');\n                        // В режиме разработки используем тестовый токен\n                        const devToken = 'dev_test_token_for_development_only';\n                        setAuthToken(devToken);\n                        console.log('Установлен тестовый токен для режима разработки');\n                    } else {\n                        throw new Error('Требуется авторизация');\n                    }\n                } else {\n                    // Устанавливаем токен в заголовки запроса\n                    setAuthToken(token);\n                    console.log('Токен установлен из localStorage для запроса на создание лобби');\n                }\n            } else {\n                console.log('Токен авторизации уже присутствует в заголовках');\n            }\n\n            // Проверяем наличие необходимых данных\n            if (!data.game_id) {\n                throw new Error('ID игры не указан');\n            }\n            if (!data.bet_amount || data.bet_amount <= 0) {\n                throw new Error('Некорректная сумма ставки');\n            }\n\n            const requestData = {\n                game_id: data.game_id,\n                bet_amount: data.bet_amount\n            };\n\n            // Если мы в режиме разработки и используем тестовый токен, добавляем флаг dev_mode\n            if (isUsingDevToken()) {\n                console.log('Добавление флага dev_mode в запрос');\n                requestData.dev_mode = true;\n            }\n\n            // Повторно проверяем заголовки перед отправкой запроса\n            const finalAuthHeader = apiClient.defaults.headers.common['Authorization'];\n            console.log('Финальный заголовок авторизации перед отправкой:',\n                finalAuthHeader ? `${finalAuthHeader.substring(0, 20)}...` : 'Отсутствует');\n\n            console.log('Подготовка запроса на создание лобби:', {\n                url: '/lobbies',\n                method: 'POST',\n                data: requestData,\n                headers: {\n                    ...apiClient.defaults.headers,\n                    Authorization: apiClient.defaults.headers.common['Authorization'] ?\n                        apiClient.defaults.headers.common['Authorization'].substring(0, 20) + '...' : undefined\n                }\n            });\n\n            const response = await apiClient.post('/lobbies', requestData);\n\n            console.log('Успешный ответ сервера:', {\n                status: response.status,\n                data: response.data,\n                headers: response.headers\n            });\n\n            // Проверяем формат ответа и нормализуем его\n            if (response.data && !response.data.id && response.data.lobby) {\n                // Если сервер вернул данные в формате { lobby: { id: ... } }\n                response.data = response.data.lobby;\n            }\n\n            return response;\n        } catch (error) {\n            console.error('Ошибка при создании лобби:', {\n                message: error.message,\n                request: {\n                    url: error.config?.url,\n                    method: error.config?.method,\n                    data: JSON.parse(error.config?.data || '{}'),\n                    headers: {\n                        ...error.config?.headers,\n                        Authorization: error.config?.headers?.Authorization ?\n                            error.config?.headers?.Authorization.substring(0, 20) + '...' : undefined\n                    }\n                },\n                response: {\n                    status: error.response?.status,\n                    statusText: error.response?.statusText,\n                    data: error.response?.data,\n                    headers: error.response?.headers\n                }\n            });\n\n            // Если это ошибка 500 и сообщение об отсутствии активного лобби,\n            // пробуем создать лобби еще раз\n            if (error.response?.status === 500 &&\n                error.response?.data?.error?.includes('active lobby not found')) {\n                console.log('Повторная попытка создания лобби...');\n                try {\n                    // Используем те же данные, что и в первом запросе\n                    const retryData = {\n                        game_id: data.game_id,\n                        bet_amount: data.bet_amount\n                    };\n                    const retryResponse = await apiClient.post('/lobbies', retryData);\n                    console.log('Успешный ответ сервера при повторной попытке:', {\n                        status: retryResponse.status,\n                        data: retryResponse.data,\n                        headers: retryResponse.headers\n                    });\n                    return retryResponse;\n                } catch (retryError) {\n                    console.error('Ошибка при повторной попытке создания лобби:', {\n                        status: retryError.response?.status,\n                        data: retryError.response?.data,\n                        message: retryError.message,\n                        request: {\n                            url: retryError.config?.url,\n                            method: retryError.config?.method,\n                            data: JSON.parse(retryError.config?.data || '{}'),\n                            headers: {\n                                ...retryError.config?.headers,\n                                Authorization: retryError.config?.headers?.Authorization ?\n                                    retryError.config?.headers?.Authorization.substring(0, 20) + '...' : undefined\n                            }\n                        },\n                        response: {\n                            status: retryError.response?.status,\n                            statusText: retryError.response?.statusText,\n                            data: retryError.response?.data,\n                            headers: retryError.response?.headers\n                        }\n                    });\n                    throw retryError;\n                }\n            }\n\n            throw error;\n        }\n    },\n\n    // Получение информации о лобби по ID\n    get: (id) => {\n        return apiClient.get(`/lobbies/${id}`);\n    },\n\n    // Получение активного лобби пользователя\n    getActive: () => {\n        return apiClient.get('/lobbies/active');\n    },\n\n    // Получение всех лобби пользователя\n    getAll: (params) => {\n        return apiClient.get('/lobbies', { params });\n    },\n\n    // Отправка попытки угадать слово\n    makeAttempt: (id, data) => {\n        return apiClient.post(`/lobbies/${id}/attempt`, data);\n    },\n\n    // Получение истории попыток\n    getAttempts: (id) => {\n        return apiClient.get(`/lobbies/${id}/attempts`);\n    },\n\n    // Продление времени лобби\n    extendTime: (id, data) => {\n        return apiClient.post(`/lobbies/${id}/extend`, data);\n    },\n};\n\n// API для работы с транзакциями\nconst transaction = {\n    // Получение всех транзакций пользователя\n    getAll: (params) => {\n        return apiClient.get('/transactions', { params });\n    },\n\n    // Получение транзакции по ID\n    get: (id) => {\n        return apiClient.get(`/transactions/${id}`);\n    },\n\n    // Создание депозита\n    createDeposit: (data) => {\n        return apiClient.post('/transactions/deposit', data);\n    },\n\n    // Проверка статуса депозита\n    verifyDeposit: (data) => {\n        return apiClient.post('/transactions/verify', data);\n    },\n};\n\n// Собираем все API методы в один объект\nconst apiService = {\n    apiClient,\n    setAuthToken,\n    setTelegramInitData,\n    isDevelopmentMode,\n    isUsingDevToken,\n    auth,\n    user,\n    game,\n    lobby,\n    transaction,\n};\n\nexport default apiService; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}