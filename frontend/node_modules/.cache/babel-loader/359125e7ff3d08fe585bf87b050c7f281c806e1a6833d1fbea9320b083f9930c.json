{"ast":null,"code":"var _jsxFileName = \"/Users/takuro/Projects/wordle/frontend/src/context/AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { authAPI, userAPI } from '../api';\n\n// Создаем контекст\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\n\n// Провайдер контекста\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Инициализация пользователя при загрузке страницы\n  useEffect(() => {\n    const initAuth = async () => {\n      try {\n        setLoading(true);\n        // Сначала пробуем авторизацию через Telegram Mini App\n        const authData = await authAPI.telegramAuth();\n\n        // Затем получаем данные пользователя\n        const userData = await userAPI.getCurrentUser();\n        setUser(userData.data);\n      } catch (err) {\n        console.error('Auth initialization error:', err);\n        setError(err.message || 'Ошибка авторизации');\n      } finally {\n        setLoading(false);\n      }\n    };\n    initAuth();\n  }, []);\n\n  // Функция выхода\n  const logout = async () => {\n    try {\n      await authAPI.logout();\n      setUser(null);\n    } catch (err) {\n      console.error('Logout error:', err);\n      setError(err.message || 'Ошибка при выходе из системы');\n    }\n  };\n\n  // Обновление данных пользователя\n  const refreshUserData = async () => {\n    try {\n      setLoading(true);\n      const userData = await userAPI.getCurrentUser();\n      setUser(userData.data);\n    } catch (err) {\n      console.error('Error refreshing user data:', err);\n      setError(err.message || 'Ошибка обновления данных пользователя');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const value = {\n    user,\n    loading,\n    error,\n    logout,\n    refreshUserData,\n    isAuthenticated: !!user\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 12\n  }, this);\n};\n\n// Хук для использования контекста\n_s(AuthProvider, \"PA9FxEY9xSNRrsSqaLtbYei52Hs=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","authAPI","userAPI","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","loading","setLoading","error","setError","initAuth","authData","telegramAuth","userData","getCurrentUser","data","err","console","message","logout","refreshUserData","value","isAuthenticated","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","Error","$RefreshReg$"],"sources":["/Users/takuro/Projects/wordle/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { authAPI, userAPI } from '../api';\n\n// Создаем контекст\nconst AuthContext = createContext(null);\n\n// Провайдер контекста\nexport const AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    // Инициализация пользователя при загрузке страницы\n    useEffect(() => {\n        const initAuth = async () => {\n            try {\n                setLoading(true);\n                // Сначала пробуем авторизацию через Telegram Mini App\n                const authData = await authAPI.telegramAuth();\n\n                // Затем получаем данные пользователя\n                const userData = await userAPI.getCurrentUser();\n                setUser(userData.data);\n            } catch (err) {\n                console.error('Auth initialization error:', err);\n                setError(err.message || 'Ошибка авторизации');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        initAuth();\n    }, []);\n\n    // Функция выхода\n    const logout = async () => {\n        try {\n            await authAPI.logout();\n            setUser(null);\n        } catch (err) {\n            console.error('Logout error:', err);\n            setError(err.message || 'Ошибка при выходе из системы');\n        }\n    };\n\n    // Обновление данных пользователя\n    const refreshUserData = async () => {\n        try {\n            setLoading(true);\n            const userData = await userAPI.getCurrentUser();\n            setUser(userData.data);\n        } catch (err) {\n            console.error('Error refreshing user data:', err);\n            setError(err.message || 'Ошибка обновления данных пользователя');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const value = {\n        user,\n        loading,\n        error,\n        logout,\n        refreshUserData,\n        isAuthenticated: !!user,\n    };\n\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\n// Хук для использования контекста\nexport const useAuth = () => {\n    const context = useContext(AuthContext);\n    if (!context) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n};\n\nexport default AuthContext; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}